<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>thera_pixel: our data</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">

    <link rel="icon" href="{{ url_for('static', filename='images/logo.png') }}" type="image/png">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/pico-main/css/pico.min.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        /* Accent color */
        :root {
            --primary: #76a7c3;
            scroll-behavior: smooth;
        }

        body, h1, h2, h3, p, button, a, nav {
            text-transform: lowercase;
            font-family: 'Space Mono', monospace;
        }

        /* Pixel font */
        .pixel-font {
            font-family: 'Press Start 2P', cursive;
        }

        /* Navbar */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background-color: rgba(118, 167, 195, 0.1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav .navbar-left img {
            height: 45px;
            margin-right: 5px;
        }

        nav .navbar-right a {
            margin-left: 1rem;
            color: var(--primary);
            text-decoration: none;
        }

        nav .navbar-right a:hover {
            text-decoration: underline;
        }

        .button {
            margin: 2rem 0;
        }

        /* Section styling */
        section {
            padding: 1rem 0;
        }

        /* Info boxes */
        .info-box {
            padding: 2rem;
            border-radius: 1rem;
            background-color: rgba(76, 124, 175, 0.1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .info-box:hover {
            transform: translateY(-5px);
        }

        /* Pixel-style button */
        button, a.button {
            background-color: var(--primary);
            border: 3px solid #000;
            border-radius: 0;
            font-family: 'Press Start 2P', cursive;
            color: white;
            padding: 0.75rem 1.5rem;
            transition: background-color 0.3s ease;
        }

        button:hover, a.button:hover {
            background-color: #5c8ca7;
        }

        /* Pixelated elements */
        .pixel-border {
            border: 4px solid #000;
            border-radius: 0;
        }

        .info-box-logo {
            display: block;
            margin: 0 auto 1rem;
            width: auto;
            height: 300px;
            max-width: 100%;
        }

        /* Typing animation */
        .typing-text {
            overflow: hidden;
            white-space: nowrap;
            border-right: 3px solid var(--primary);
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
            font-size: 2rem;
            padding: 4rem 0 1rem 0;
            text-align: center;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite, glow 2s infinite alternate;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            50% { border-color: transparent; }
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px #76a7c3, 0 0 20px #76a7c3; }
            to { text-shadow: 0 0 20px #5c8ca7, 0 0 30px #5c8ca7; }
        }

        .flex-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        /* Container for the graph (image) */
        .graph-container {
            flex: 1;
            margin-right: 5px; /* Space between the graph and description */
        }

        /* Container for the description text */
        .description-container {
            flex: 2; /* Adjust flex value to give more space for the text */
            padding-left: 25px;
        }

    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="pixel-border">
        <div class="navbar-left">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo">
            <span class="pixel-font">thera_pixel</span>
        </div>
        <div class="navbar-right">
            <a href="/" class="pixel-font">games</a>
            <a href="/data" class="pixel-font">data</a>
            <a href="/design" class="pixel-font">design</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="container">
        <h4 class="typing-text pixel-font">data: the heart of our project</h4>
        <p class="pixel-font" style="text-align: center;">we use reliable data to evaluate movement in real time. here's how:</p>
    </header>

    <!-- Game Info Section -->
    <section id="game-info" class="container">
        <div class="info-box pixel-border">
            <h2 class="pixel-font">overview</h2>
            <p> our application primarily utilizes vectorization and visualiztion of real-time motion via computer vision with cv2 and mediapipe libraries. we also used the mdpi dataset, which is composed of spatial coordinates of various correct and incorrect movements typically performed in physical therapy settings. comparing our realtime data with this database allows us to offer realtime feedback to users.</p>
            <p> we combine this backend with our front-end HTML using the flsk framework, which features our game design, created using pixel art, as well as our website design, which utilizes pico css.</p>
        </div>
    </section>

    <!-- References Section -->
    <section class="container" id="game-materials">
        <div class="grid">
            <div class="info-box pixel-border">
                <h4 class="pixel-font" style="color: #5c8ca7">Kaggle Data Set</h3>
                <p>the kaggle dataset features sensor data from a range of physical therapy exercises, including accelerometer readings that capture movement dynamics. we utilized this data to understand typical motion patterns and extract accelerometer values to accurately track the speed of patient movements. this enabled us to provide real-time feedback in our practice studio, helping users refine their form and improve their physical therapy outcomes.</p>
                <a href="https://www.kaggle.com/datasets/rabieelkharoua/physical-therapy-exercises-dataset" class="pixel-font">check it out!</a>
            </div>
            <div class="info-box pixel-border">
                <h4 class="pixel-font" style="color: #5c8ca7">MDPI Dataset</h3>
                <p>the MDPI dataset contains detailed x, y, z coordinate data from various physical therapy exercises, enabling precise motion tracking and analysis. we used this dataset to compare users' real-time movements with prerecorded spatial coordinates, allowing for accurate form assessment and targeted feedback in our practice studio. this comparison helps users align their movements with ideal therapy standards, enhancing their rehabilitation process.</p>
                <a href="https://zenodo.org/records/4610859" class="pixel-font">check it out!</a>
            </div>
            <div class="info-box pixel-border">
                <h4 class="pixel-font" style="color: #5c8ca7">Paper</h3>
                <p> this paper, part of Measurements of User and Sensor Data from the Internet of Things (IoT) Devices, details the specifics of the mdpi dataset that we used. it goes through the different metrics that are a part of teh dataset, how they were tracked, and what kind of regression/analysis can be done on them. this was helpful for us to look trhough and refer to when learning to implement time-series interpolation.</p>
                <a href="https://www.mdpi.com/2306-5729/6/5/46" class="pixel-font">check it out!</a>
            </div>
        </div>
    </section>

    <!-- Process Section -->
    <section class="container" id="data">
        <div class="info-box pixel-border">
            <h2 class="pixel-font">Our process</h2>
            <p>this was our first time ever working with computer vision and data interpolation with video data. from watching videos on repeat on how to use cv2, to taking hours trying to understand the format of the mdpi database, we definitely had a huge learning curve with this project and are excited about how far we have come in just 36 hours.</p>
            <p>in terms of data, we learned and used the following tools and techniques:</p>
            <ul style="list-style-type: square;">
                <li>data collection and parsing</li>
                <li>data pre-processing and cleaning</li>
                <li>time-series interpolation</li>
                <li>data visualization and graphing</li>
                <li>real-time data analysis</li>
            </ul>
            <p>the biggest challenge we faced was figuring out how to correlate trends in the data we parsed and analyzed from the mdpi dataset to realtime data to provide user feedback.</p>
            <br>
            <!-- Add a flex container to align images and description -->
            <div class="flex-container">
                <!-- Image 1 (Graph) on the left -->
                <div class="graph-container">
                    <img src="{{ url_for('static', filename='images/leftcurl.png') }}" alt="Graph 1" class="info-box-logo">
                </div>
                
                <!-- Description text on the right -->
                <div class="description-container">
                    <p>we started by taking all spatial point (x,y,z) data from videos in the dataset that represented correctly performed physical therapy movements. however, we realized that these instances had different numbers of frames, so taking an average was not easy. thus, we first computed the angle between the sholder, elbow, and wrist connection lines, before normalizing this data and then averaging these values over each timestep. this gave us the graphs shown to the left for each movement.</p>
                </div>
            </div>
            
            <!-- Repeat the same structure for the second graph -->
            <div class="flex-container">
                <!-- Image 2 (Graph) on the left -->
                <div class="graph-container">
                    <img src="{{ url_for('static', filename='images/rightcurl.png') }}" alt="Graph 2" class="info-box-logo">
                </div>
                
                <!-- Description text on the right -->
                <div class="description-container">
                    <p>after the aggregation of data, we set off to figure out how we can collect real-time data from the user through our front-end flask application and the mediapipe library. initially, we found that the user feedback would update nerly every half second, making it impossible for the user to read and follow the instructions. we realized it was very difficult to do real-time analysis when the length of time for each rep done by the user was unknown. after hours of debugging and deliberation, including measuring progress by change of angle and using graph regression, we were stumped.</p>
                </div>
            </div>
            <p>we eventually came up with the idea to incorporate a timer telling the user when to start a given motion, then give feedback on pacing, as at each clock cycle, the angle of the user's arm is compared to the expected angle according to the data at a time t after the timer starts. this seemed to work relatively well, as we were able to set it to a pace that is easy to follow along with and analyze in real time.</p>
            <p>check out our real-time feedback system: </p>
            <a href="/practicestudio" class="pixel-font">thera_pixel's practice studio</a>
        </div>
    </section>

</body>
</html>